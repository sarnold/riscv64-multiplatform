From c260c23fdc43fb17f6c85d9470b40806872070cf Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=E5=B0=81=E6=AC=A2?= <huan.feng@starfivetech.com>
Date: Tue, 26 Jan 2021 11:09:03 +0800
Subject: [PATCH 68/79] =?UTF-8?q?=E4=BF=AE=E5=A4=8Dgpio-vic=E9=A9=B1?=
 =?UTF-8?q?=E5=8A=A8=E4=B8=AD=E7=9A=84gpio=5Fdirection=5Foutput=E6=8E=A5?=
 =?UTF-8?q?=E5=8F=A3=E5=AE=9E=E7=8E=B0?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 drivers/gpio/gpio-starfive-vic.c | 1 +
 1 file changed, 1 insertion(+)
 mode change 100755 => 100644 drivers/gpio/gpio-starfive-vic.c

diff --git a/drivers/gpio/gpio-starfive-vic.c b/drivers/gpio/gpio-starfive-vic.c
old mode 100755
new mode 100644
index c68a00f20255..3459cdd9367b
--- a/drivers/gpio/gpio-starfive-vic.c
+++ b/drivers/gpio/gpio-starfive-vic.c
@@ -107,6 +107,7 @@ static int starfive_direction_output(struct gpio_chip *gc, unsigned offset, int
 		return -EINVAL;
 	raw_spin_lock_irqsave(&chip->lock, flags);
 	writel_relaxed(0x0, chip->base + GPIO_DOEN_X_REG + offset * 8);
+	writel_relaxed(value, chip->base + GPIO_DOUT_X_REG + offset * 8);
 	raw_spin_unlock_irqrestore(&chip->lock, flags);
 
 	return 0;
-- 
2.30.0

